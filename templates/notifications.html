{% extends 'base.html' %}

{% block title %}Notification Center · 247FILE SHARE{% endblock %}

{% block content %}
  <section class="fs-section">
    <div class="panel-head">
      <h1 class="section-title">Notification Center</h1>
      <p class="muted">All your recent activity in one place{% if current_user %}, {{ current_user.username }}{% endif %}.</p>
    </div>

    {% if notifications and notifications|length > 0 %}
    <div style="display:flex;flex-direction:column;gap:12px;max-width:720px;">
      {% for n in notifications %}
      <article class="fs-feature-card" style="display:flex;align-items:center;gap:12px;padding:14px 16px;font-size:15px;">
        {% if n.actor_username %}
          <div style="flex:0 0 auto;">
            {% if n.actor_avatar %}
              <a href="/users/{{ n.actor_username }}" style="display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:999px;overflow:hidden;background:linear-gradient(135deg,#eef1ff,#ffd9a8);">
                <img src="/download/{{ n.actor_avatar }}?inline=1" alt="{{ n.actor_username }} avatar" style="width:100%;height:100%;object-fit:cover;" onerror="this.style.display='none'" />
              </a>
            {% else %}
              <a href="/users/{{ n.actor_username }}" style="display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:999px;background:linear-gradient(135deg,#eef1ff,#ffd9a8);font-weight:700;color:#1f1f3f;text-decoration:none;">
                {{ n.actor_username[:1].upper() }}
              </a>
            {% endif %}
          </div>
        {% endif %}
        <div style="flex:1;display:flex;flex-direction:column;gap:2px;">
          <div style="font-weight:600;">
            {% if n.actor_username %}
              <a href="/users/{{ n.actor_username }}" style="text-decoration:none;color:inherit;font-weight:700;">
                {{ n.actor_username }}
              </a>
              {{ n.message }}
            {% else %}
              {{ n.message }}
            {% endif %}
          </div>
          <div class="muted" style="font-size:13px;">
            {{ n.created_at.strftime('%Y-%m-%d %H:%M') }}
            {% if not n.read %}
              · <span style="font-weight:600;">Unread</span>
            {% endif %}
          </div>
        </div>
        {% if n.link %}
        <div style="flex:0 0 auto;margin-left:8px;">
          <a class="btn btn--ghost" href="{{ n.link }}">Open</a>
        </div>
        {% endif %}
      </article>
      {% endfor %}
    </div>
    {% else %}
    <p class="muted">You don't have any notifications yet.</p>
    {% endif %}
  </section>
{% endblock %}
